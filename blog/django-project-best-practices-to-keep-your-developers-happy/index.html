<!doctype html><html lang=en-us><head><head><meta charset=utf-8><meta name=mobile-web-app-capable content="yes"><meta name=viewport content="width=device-width,initial-scale=1"><title>victoria.dev</title><meta name=monetization content="$ilp.uphold.com/pBRfRwg2EJAe"><link rel="shortcut icon" href=https://victoria.dev/favicon.ico><link rel=icon type=image/png href=https://victoria.dev/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://victoria.dev/favicon-16x16.png sizes=16x16><link rel=authorization_endpoint href=https://indieauth.com/auth><link rel=token_endpoint href=https://tokens.indieauth.com/token><link rel=me href=https://github.com/victoriadrake><link rel=me href=https://twitter.com/victoriadotdev><link rel=me href=https://mastodon.technology/@victoria><link rel=stylesheet href=https://victoria.dev/css/style.css crossorigin=anonymous media=screen><link rel=webmention href=https://webmention.io/victoria.dev/webmention><link rel=pingback href=https://webmention.io/victoria.dev/xmlrpc><meta property="og:url" content="https://victoria.dev/"><meta property="og:title" content="victoria.dev"><meta property="og:site_name" content="victoria.dev"><meta property="og:type" content="website"><meta name=twitter:title content="victoria.dev"></head></head><body><header role=banner><nav aria-label="Victoria.dev main menu" id=menu><ul role=menubar><li role=none class=menu-item><a role=menuitem href=/><img src=/icon/bookmark.svg alt="home page icon" height=18px class=filter-icon>&nbsp;hello</a></li><li role=none class=menu-item><a role=menuitem href=/blog/><img src=/icon/quote.svg alt="blog icon" height=18px class=filter-icon>&nbsp;blog</a></li><li role=none class=menu-item><a role=menuitem href=/about/><img src=/icon/profile.svg alt="about page icon" height=18px class=filter-icon>&nbsp;about</a></li><li role=none class=menu-item><a role=menuitem href=/bookshelf/><img src=/icon/book.svg alt="bookshelf icon" height=18px class=filter-icon>&nbsp;bookshelf</a></li></ul></nav><nav aria-label="Victoria.dev menu for mobile" id=menu-mobile><ul role=menubar><li role=none class=menu-item><a role=menuitem href=/><img src=/icon/bookmark.svg alt="home page icon" height=18px class=filter-icon></a></li><li role=none class=menu-item><a role=menuitem href=/blog/><img src=/icon/quote.svg alt="blog icon" height=18px class=filter-icon></a></li><li role=none class=menu-item><a role=menuitem href=/about/><img src=/icon/profile.svg alt="about page icon" height=18px class=filter-icon></a></li><li role=none class=menu-item><a role=menuitem href=/bookshelf/><img src=/icon/book.svg alt="bookshelf icon" height=18px class=filter-icon></a></li></ul></nav></header><main aria-role=main><div class=container><div id=cover-image><img class=u-photo src=https://victoria.dev/blog/django-project-best-practices-to-keep-your-developers-happy/cover.png alt="cover image"></div><article class=h-entry><h1 class=p-name>Django project best practices to keep your developers happy</h1><p class=subtitle>Using Makefiles, pre-commit, and GitHub Actions to help create a happy development team.</p><span><a class="p-category tag button" href=/tags/python/>python
</a>&nbsp;
<a class="p-category tag button" href=/tags/tech-team/>tech team
</a>&nbsp;
<a class="p-category tag button" href=/tags/leadership/>leadership
</a>&nbsp;
<a class="p-category tag button" href=/tags/coding/>coding
</a>&nbsp;
<a class="p-category tag button" href=/tags/docs/>docs
</a>&nbsp;</span>
<span rel=author class="p-author h-card"><img class="u-photo hidden" src=/img/victoria_headshot.jpg>
<span class="p-name hidden" rel=me>Victoria Drake</span></span><p class=metadata id=date><time class="hidden dt-published">2020-09-22 04:55:19 -0400 -0400</time>
<a class=u-url href=https://victoria.dev/blog/django-project-best-practices-to-keep-your-developers-happy/>September 22, 2020</a>
<span class=dt-updated>&nbsp;<em>Updated: Jun 17, 2021</em></span>
<span>&nbsp;6 min read</span></p></p><div class=page-separator><hr></div><div class="markdown e-content"><p>Do you want your team to <em>enjoy</em> your development workflow? Do you think building software should be <em>fun and existentially fulfilling?</em> If so, <em>this is the post</em> for you!</p><p>I&rsquo;ve been developing with Django for years, and I&rsquo;ve never been happier with my Django project set up than I am right now. Here&rsquo;s how I&rsquo;m making a day of developing with Django the most relaxing and enjoyable development experience possible for myself and my engineering team.</p><h2 id=a-custom-cli-tool-for-your-django-project>A custom CLI tool for your Django project</h2><p>Instead of typing:</p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh>python3 -m venv env
<span class=nb>source</span> env/bin/activate
pip install -r requirements.txt
python3 manage.py makemigrations
python3 manage.py migrate
python3 manage.py collectstatic
python3 manage.py runserver
</code></pre></div><p>Wouldn&rsquo;t it be much nicer to type:</p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh>make start
</code></pre></div><p>&mldr;and have all that happen for you? I think so!</p><p>We can do that with a self-documenting Makefile! Here&rsquo;s one I frequently use when developing my Django applications, like <a href=https://applybyapi.com/>ApplyByAPI.com</a>:</p><div class=highlight><pre class=chroma><code class=language-Makefile data-lang=Makefile><span class=nv>VENV</span> <span class=o>:=</span> env
<span class=nv>BIN</span> <span class=o>:=</span> <span class=k>$(</span>VENV<span class=k>)</span>/bin
<span class=nv>PYTHON</span> <span class=o>:=</span> <span class=k>$(</span>BIN<span class=k>)</span>/python
<span class=nv>SHELL</span> <span class=o>:=</span> /bin/bash

<span class=err>include</span> <span class=err>.env</span>

<span class=nf>.PHONY</span><span class=o>:</span> <span class=n>help</span>
<span class=nf>help</span><span class=o>:</span> <span class=c>## Show this help
</span><span class=c></span>    @egrep -h <span class=s1>&#39;\s##\s&#39;</span> <span class=k>$(</span>MAKEFILE_LIST<span class=k>)</span> <span class=p>|</span> awk <span class=s1>&#39;BEGIN {FS = &#34;:.*?## &#34;}; {printf &#34;\033[36m%-20s\033[0m %s\n&#34;, $$1, $$2}&#39;</span>

<span class=nf>.PHONY</span><span class=o>:</span> <span class=n>venv</span>
<span class=nf>venv</span><span class=o>:</span> <span class=c>## Make a new virtual environment
</span><span class=c></span>    python3 -m venv <span class=k>$(</span>VENV<span class=k>)</span> <span class=o>&amp;&amp;</span> <span class=nb>source</span> <span class=k>$(</span>BIN<span class=k>)</span>/activate

<span class=nf>.PHONY</span><span class=o>:</span> <span class=n>install</span>
<span class=nf>install</span><span class=o>:</span> <span class=n>venv</span> <span class=c>## Make venv and install requirements
</span><span class=c></span>    <span class=k>$(</span>BIN<span class=k>)</span>/pip install --upgrade -r requirements.txt

<span class=nf>freeze</span><span class=o>:</span> <span class=c>## Pin current dependencies
</span><span class=c></span>    <span class=k>$(</span>BIN<span class=k>)</span>/pip freeze &gt; requirements.txt

<span class=nf>migrate</span><span class=o>:</span> <span class=c>## Make and run migrations
</span><span class=c></span>    <span class=k>$(</span>PYTHON<span class=k>)</span> manage.py makemigrations
    <span class=k>$(</span>PYTHON<span class=k>)</span> manage.py migrate

<span class=nf>db-up</span><span class=o>:</span> <span class=c>## Pull and start the Docker Postgres container in the background
</span><span class=c></span>    docker pull postgres
    docker-compose up -d

<span class=nf>db-shell</span><span class=o>:</span> <span class=c>## Access the Postgres Docker database interactively with psql. Pass in DBNAME=&lt;name&gt;.
</span><span class=c></span>    docker <span class=nb>exec</span> -it container_name psql -d <span class=k>$(</span>DBNAME<span class=k>)</span>

<span class=nf>.PHONY</span><span class=o>:</span> <span class=n>test</span>
<span class=nf>test</span><span class=o>:</span> <span class=c>## Run tests
</span><span class=c></span>    <span class=k>$(</span>PYTHON<span class=k>)</span> manage.py <span class=nb>test</span> application --verbosity<span class=o>=</span><span class=m>0</span> --parallel --failfast

<span class=nf>.PHONY</span><span class=o>:</span> <span class=n>run</span>
<span class=nf>run</span><span class=o>:</span> <span class=c>## Run the Django server
</span><span class=c></span>    <span class=k>$(</span>PYTHON<span class=k>)</span> manage.py runserver

<span class=nf>start</span><span class=o>:</span> <span class=n>install</span> <span class=n>migrate</span> <span class=n>run</span> <span class=c>## Install requirements, apply migrations, then start development server
</span></code></pre></div><p>You&rsquo;ll notice the presence of the line <code>include .env</code> above. This ensures <code>make</code> has access to environment variables stored in a file called <code>.env</code>. This allows Make to utilize these variables in its commands, for example, the name of my virtual environment, or to pass in <code>$(DBNAME)</code> to <code>psql</code>.</p><p>What&rsquo;s with that weird &ldquo;<code>##</code>&rdquo; comment syntax? A Makefile like this gives you a handy suite of command-line aliases you can check in to your Django project. It&rsquo;s very useful so long as you&rsquo;re able to remember what all those aliases are.</p><p>The <code>help</code> command above, which runs by default, prints a helpful list of available commands when you run <code>make</code> or <code>make help</code>:</p><div class=highlight><pre class=chroma><code class=language-text data-lang=text>help                 Show this help
venv                 Make a new virtual environment
install              Make venv and install requirements
migrate              Make and run migrations
db-up                Pull and start the Docker Postgres container in the background
db-shell             Access the Postgres Docker database interactively with psql
test                 Run tests
run                  Run the Django server
start                Install requirements, apply migrations, then start development server
</code></pre></div><p>All the usual Django commands are covered, and we&rsquo;ve got a <code>test</code> command that runs our tests with the options we prefer. Brilliant.</p><p>You can read my full <a href=/blog/how-to-create-a-self-documenting-makefile/>post about self-documenting Makefiles here</a>, which also includes an example Makefile using <code>pipenv</code>.</p><h2 id=save-your-brainpower-with-pre-commit-hooks>Save your brainpower with pre-commit hooks</h2><p>I previously wrote about some <a href=/blog/technical-ergonomics-for-the-efficient-developer/>technical ergonomics</a> that can make it a lot easier for teams to develop great software.</p><p>One area that&rsquo;s a no-brainer is using pre-commit hooks to lint code prior to checking it in. This helps to ensure the quality of the code your developers check in, but most importantly, ensures that no one on your team is spending time trying to remember if it should be single or double quotes or where to put a line break.</p><p>The confusingly-named <a href=https://pre-commit.com/>pre-commit framework</a> is an otherwise fantastic way to keep hooks (which are not included in cloned repositories) consistent across local environments.</p><p>Here is my configuration file, <code>.pre-commit-config.yaml</code>, for my Django projects:</p><div class=highlight><pre class=chroma><code class=language-yaml data-lang=yaml><span class=nt>fail_fast</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span><span class=w></span><span class=nt>repos</span><span class=p>:</span><span class=w>
</span><span class=w>  </span>- <span class=nt>repo</span><span class=p>:</span><span class=w> </span><span class=l>https://github.com/pre-commit/pre-commit-hooks</span><span class=w>
</span><span class=w>    </span><span class=nt>rev</span><span class=p>:</span><span class=w> </span><span class=l>v3.1.0</span><span class=w>
</span><span class=w>    </span><span class=nt>hooks</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- <span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>detect-aws-credentials</span><span class=w>
</span><span class=w>  </span>- <span class=nt>repo</span><span class=p>:</span><span class=w> </span><span class=l>https://github.com/psf/black</span><span class=w>
</span><span class=w>    </span><span class=nt>rev</span><span class=p>:</span><span class=w> </span><span class=m>19.</span><span class=l>3b0</span><span class=w>
</span><span class=w>    </span><span class=nt>hooks</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- <span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>black</span><span class=w>
</span><span class=w>  </span>- <span class=nt>repo</span><span class=p>:</span><span class=w> </span><span class=l>https://github.com/asottile/blacken-docs</span><span class=w>
</span><span class=w>    </span><span class=nt>rev</span><span class=p>:</span><span class=w> </span><span class=l>v1.7.0</span><span class=w>
</span><span class=w>    </span><span class=nt>hooks</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- <span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>blacken-docs</span><span class=w>
</span><span class=w>        </span><span class=nt>additional_dependencies</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>black==19.3b0]</span><span class=w>
</span><span class=w>  </span>- <span class=nt>repo</span><span class=p>:</span><span class=w> </span><span class=l>local</span><span class=w>
</span><span class=w>    </span><span class=nt>hooks</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- <span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>markdownlint</span><span class=w>
</span><span class=w>        </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>markdownlint</span><span class=w>
</span><span class=w>        </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Lint Markdown files&#34;</span><span class=w>
</span><span class=w>        </span><span class=nt>entry</span><span class=p>:</span><span class=w> </span><span class=l>markdownlint &#39;**/*.md&#39; --fix --ignore node_modules --config &#34;./.markdownlint.json&#34;</span><span class=w>
</span><span class=w>        </span><span class=nt>language</span><span class=p>:</span><span class=w> </span><span class=l>node</span><span class=w>
</span><span class=w>        </span><span class=nt>types</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>markdown]</span><span class=w>
</span></code></pre></div><p>These hooks check for accidental secret commits, format Python files using <a href=https://github.com/psf/black>Black</a>, format Python snippets in Markdown files using <a href=https://github.com/asottile/blacken-docs><code>blacken-docs</code></a>, and <a href=https://github.com/igorshubovych/markdownlint-cli>lint Markdown files</a> as well. To install them, just type <code>pre-commit install</code>.</p><p>There are likely even more useful hooks available for your particular use case: see <a href=https://pre-commit.com/hooks.html>supported hooks</a> to explore.</p><h2 id=useful-gitignores>Useful gitignores</h2><p>An underappreciated way to improve your team&rsquo;s daily development experience is to make sure your project uses a well-rounded <code>.gitignore</code> file. It can help prevent files containing secrets from being committed, and can additionally save developers hours of tedium by ensuring you&rsquo;re never sifting through a <code>git diff</code> of generated files.</p><p>To efficiently create a <a href=https://www.toptal.com/developers/gitignore/api/python,django>gitignore for Python and Django projects</a>, Toptal&rsquo;s <a href=https://gitignore.io>gitignore.io</a> can be a nice resource for generating a robust <code>.gitignore</code> file.</p><p>I still recommend examining the generated results yourself to ensure that ignored files suit your use case, and that nothing you want ignored is commented out.</p><h2 id=continuous-testing-with-github-actions>Continuous testing with GitHub Actions</h2><p>If your team works on GitHub, setting up a testing process with Actions is low-hanging fruit.</p><p>Tests that run in a consistent environment on every pull request can help eliminate &ldquo;works on my machine&rdquo; conundrums, as well as ensure no one&rsquo;s sitting around waiting for a test to run locally.</p><p>A hosted CI environment like GitHub Actions can also help when running integration tests that require using managed services resources. You can use <a href=https://docs.github.com/en/actions/configuring-and-managing-workflows/creating-and-storing-encrypted-secrets>encrypted secrets in a repository</a> to grant the Actions runner access to resources in a testing environment, without worrying about creating testing resources and access keys for each of your developers to use.</p><p>I&rsquo;ve written on many occasions about setting up Actions workflows, including <a href=/blog/a-lightweight-tool-agnostic-ci/cd-flow-with-github-actions/>using one to run your Makefile</a>, and <a href=/blog/publishing-github-event-data-with-github-actions-and-pages/>how to integrate GitHub event data</a>. GitHub even <a href=https://github.blog/2020-06-26-github-action-hero-victoria-drake/>interviewed me about Actions</a> once.</p><p>For Django projects, here&rsquo;s a GitHub Actions workflow that runs tests with a consistent Python version whenever someone opens a pull request in the repository.</p><div class=highlight><pre class=chroma><code class=language-yaml data-lang=yaml><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Run Django tests</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=nt>on</span><span class=p>:</span><span class=w> </span><span class=l>pull_request</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=nt>test</span><span class=p>:</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v2</span><span class=w>
</span><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Set up Python</span><span class=w>
</span><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/setup-python@v2</span><span class=w>
</span><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span><span class=w>          </span><span class=nt>python-version</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;3.8&#39;</span><span class=w>
</span><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Install dependencies</span><span class=w>
</span><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>make install</span><span class=w>
</span><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Run tests</span><span class=w>
</span><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>make test</span><span class=w>
</span></code></pre></div><p>For the installation and test commands, I&rsquo;ve simply utilized the <a href=#a-custom-cli-tool-for-your-django-project>Makefile</a> that&rsquo;s been checked in to the repository. A benefit of using your Makefile commands in your CI test workflows is that you only need to keep them updated in one place &ndash; your Makefile! No more &ldquo;why is this working locally but not in CI??!?&rdquo; headaches.</p><p>If you want to step up your security game, you can add <a href=https://github.com/victoriadrake/django-security-check>Django Security Check</a> as an Action too.</p><h2 id=set-up-your-django-project-for-success>Set up your Django project for success</h2><p>Want to help keep your development team happy? Set them up for success with these best practices for Django development. Remember, an ounce of brainpower is worth a pound of software!</p></div><a class=hidden href=https://brid.gy/publish/twitter></a><a class=hidden href=https://brid.gy/publish/mastodon></a><data class=p-bridgy-omit-link value=false></data></article><div id=up-container><a href=# id=up>v</a></div><hr><div id=webmentions></div><div class=related><code class=language-sql data-lang=sql>SELECT TOP 3 * FROM Related;</code><ul role=menubar id=article-list><li role=none class=h-entry><a rel=author class="p-author h-card hidden" href=https://victoria.dev/>Victoria Drake</a>
<a role=menuitem class="article-link u-url p-name" href=https://victoria.dev/blog/increase-developer-confidence-with-a-great-django-test-suite/>Increase developer confidence with a great Django test suite</a><p class="p-summary e-content">How to write tests for your Django applications that boost your team, and are actually useful.</p><p class=metadata><a class="p-category tag button" href=https://victoria.dev/tags/coding/>coding</a>
&nbsp;5 min read
<time class="hidden dt-published">2020-10-01 05:50:37 -0400 -0400</time></p></li><li role=none class=h-entry><a rel=author class="p-author h-card hidden" href=https://victoria.dev/>Victoria Drake</a>
<a role=menuitem class="article-link u-url p-name" href=https://victoria.dev/blog/how-to-create-a-self-documenting-makefile/>How to create a self-documenting Makefile</a><p class="p-summary e-content">Accelerate your workflow and DevOps with command-line aliases you can check in</p><p class=metadata><a class="p-category tag button" href=https://victoria.dev/tags/coding/>coding</a>
&nbsp;4 min read
<time class="hidden dt-published">2020-08-05 08:55:19 -0400 -0400</time></p></li><li role=none class=h-entry><a rel=author class="p-author h-card hidden" href=https://victoria.dev/>Victoria Drake</a>
<a role=menuitem class="article-link u-url p-name" href=https://victoria.dev/blog/do-i-raise-or-return-errors-in-python/>Do I raise or return errors in Python?</a><p class="p-summary e-content">Raise, return, and how to never fail silently in Python.</p><p class=metadata><a class="p-category tag button" href=https://victoria.dev/tags/python/>python</a>
&nbsp;4 min read
<time class="hidden dt-published">2021-02-09 05:34:48 -0500 -0500</time></p></li></ul><div class=page-separator><p class=back-link><a href=/blog>&lt;&lt; Back to blog</a></p></div></div></div></main><footer><div class="h-card row bio" rel=author><div class=markdown id=card><figure class=profile><img class=u-photo alt="Victoria Drake" src=/img/victoria_headshot.jpg></figure><h1 class=p-name>Victoria Drake</h1></address><p class=p-note><p>Victoria Drake is a Director of Engineering in Washington, DC. She is a core maintainer and co-author for the Open Web Application Security Project (OWASP) Web Security Testing Guide. She earned the annual Top Contributor award three years in a row from the freeCodeCamp non-profit, and was recognized two years in a row as a Distinguished Author on the DEV.to developer platform. She writes and educates programmers and business leaders about cybersecurity, software development, and building happy and productive technical teams.</p><p><a href=/about>about</a> - <a href=/contact>contact</a> - <a href=https://github.com/victoriadrake>github</a> - <a href=https://twitter.com/victoriadotdev>twitter</a> - <a href=https://www.linkedin.com/in/victoriadotdev/>linkedin</a></p></p></div></div></footer><script src=/js/webmention.min.js data-wordcount=100 async></script></body></html>