<!doctype html><html lang=en-us><head><head><meta charset=utf-8><meta name=mobile-web-app-capable content="yes"><meta name=viewport content="width=device-width,initial-scale=1"><title>victoria.dev</title><meta name=monetization content="$ilp.uphold.com/pBRfRwg2EJAe"><link rel="shortcut icon" href=https://victoria.dev/favicon.ico><link rel=icon type=image/png href=https://victoria.dev/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://victoria.dev/favicon-16x16.png sizes=16x16><link rel=authorization_endpoint href=https://indieauth.com/auth><link rel=token_endpoint href=https://tokens.indieauth.com/token><link rel=me href=https://github.com/victoriadrake><link rel=me href=https://twitter.com/victoriadotdev><link rel=me href=https://mastodon.technology/@victoria><link rel=stylesheet href=https://victoria.dev/css/style.css crossorigin=anonymous media=screen><link rel=webmention href=https://webmention.io/victoria.dev/webmention><link rel=pingback href=https://webmention.io/victoria.dev/xmlrpc><meta property="og:url" content="https://victoria.dev/"><meta property="og:title" content="victoria.dev"><meta property="og:site_name" content="victoria.dev"><meta property="og:type" content="website"><meta name=twitter:title content="victoria.dev"></head></head><body><header role=banner><nav aria-label="Victoria.dev main menu" id=menu><ul role=menubar><li role=none class=menu-item><a role=menuitem href=/><img src=/icon/bookmark.svg alt="home page icon" height=18px class=filter-icon>&nbsp;hello</a></li><li role=none class=menu-item><a role=menuitem href=/blog/><img src=/icon/quote.svg alt="blog icon" height=18px class=filter-icon>&nbsp;blog</a></li><li role=none class=menu-item><a role=menuitem href=/about/><img src=/icon/profile.svg alt="about page icon" height=18px class=filter-icon>&nbsp;about</a></li><li role=none class=menu-item><a role=menuitem href=/bookshelf/><img src=/icon/book.svg alt="bookshelf icon" height=18px class=filter-icon>&nbsp;bookshelf</a></li></ul></nav><nav aria-label="Victoria.dev menu for mobile" id=menu-mobile><ul role=menubar><li role=none class=menu-item><a role=menuitem href=/><img src=/icon/bookmark.svg alt="home page icon" height=18px class=filter-icon></a></li><li role=none class=menu-item><a role=menuitem href=/blog/><img src=/icon/quote.svg alt="blog icon" height=18px class=filter-icon></a></li><li role=none class=menu-item><a role=menuitem href=/about/><img src=/icon/profile.svg alt="about page icon" height=18px class=filter-icon></a></li><li role=none class=menu-item><a role=menuitem href=/bookshelf/><img src=/icon/book.svg alt="bookshelf icon" height=18px class=filter-icon></a></li></ul></nav></header><main aria-role=main><div class=container><div id=cover-image><img class=u-photo src=https://victoria.dev/blog/how-to-do-twice-as-much-with-half-the-keystrokes-using-.bashrc/cover.png alt="cover image"></div><article class=h-entry><h1 class=p-name>How to do twice as much with half the keystrokes using `.bashrc`</h1><p class=subtitle>An overview of time-saving aliases, functions, and creating a useful Bash prompt.</p><span><a class="p-category tag button" href=/tags/linux/>linux
</a>&nbsp;
<a class="p-category tag button" href=/tags/terminal/>terminal
</a>&nbsp;
<a class="p-category tag button" href=/tags/git/>git
</a>&nbsp;</span>
<span rel=author class="p-author h-card"><img class="u-photo hidden" src=/img/victoria_headshot.jpg>
<span class="p-name hidden" rel=me>Victoria Drake</span></span><p class=metadata id=date><time class="hidden dt-published">2019-08-21 09:17:02 -0400 -0400</time>
<a class=u-url href=https://victoria.dev/blog/how-to-do-twice-as-much-with-half-the-keystrokes-using-.bashrc/>August 21, 2019</a>
<span class=dt-updated>&nbsp;<em>Updated: Jun 24, 2021</em></span>
<span>&nbsp;7 min read</span></p></p><div class=page-separator><hr></div><div class="markdown e-content"><p>In my <a href=/blog/how-to-set-up-a-fresh-ubuntu-desktop-using-only-dotfiles-and-bash-scripts/>recent post about setting up Ubuntu with Bash scripts</a>, I briefly alluded to the magic of <code>.bashrc</code>. This didn&rsquo;t really do it justice, so here&rsquo;s a quick post that offers a bit more detail about what the Bash configuration file can do.</p><p>My current configuration hugely improves my workflow, and saves me well over 50% of the keystrokes I would have to employ without it! Let&rsquo;s look at some examples of aliases, functions, and prompt configurations that can improve our workflow by helping us be more efficient with fewer key presses.</p><h2 id=bash-aliases>Bash aliases</h2><p>A smartly written <code>.bashrc</code> can save a whole lot of keystrokes. You can take advantage of this in the literal sense by using <a href=https://www.gnu.org/software/bash/manual/html_node/Aliases.html>bash aliases</a>, or strings that expand to larger commands. For an indicative example, here is a Bash alias for copying files in the terminal:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=c1># Always copy contents of directories (r)ecursively and explain (v) what was done</span>
<span class=nb>alias</span> <span class=nv>cp</span><span class=o>=</span><span class=s1>&#39;cp -rv&#39;</span>
</code></pre></div><p>The <code>alias</code> command defines the string you&rsquo;ll type, followed by what that string will expand to. You can override existing commands like <code>cp</code> above. On its own, the <code>cp</code> command will only copy files, not directories, and succeeds silently. With this alias, you need not remember to pass those two flags, nor <code>cd</code> or <code>ls</code> the location of our copied file to confirm that it&rsquo;s there! Now, just those two key presses (for <code>c</code> and <code>d</code>) will do all of that for us.</p><p>Here are a few more <code>.bashrc</code> aliases for passing flags with common functions.</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=c1># List contents with colors for file types, (A)lmost all hidden files (without . and ..), in (C)olumns, with class indicators (F)</span>
<span class=nb>alias</span> <span class=nv>ls</span><span class=o>=</span><span class=s1>&#39;ls --color=auto -ACF&#39;</span>
<span class=c1># List contents with colors for file types, (a)ll hidden entries (including . and ..), use (l)ong listing format, with class indicators (F)</span>
<span class=nb>alias</span> <span class=nv>ll</span><span class=o>=</span><span class=s1>&#39;ls --color=auto -alF&#39;</span>

<span class=c1># Explain (v) what was done when moving a file</span>
<span class=nb>alias</span> <span class=nv>mv</span><span class=o>=</span><span class=s1>&#39;mv -v&#39;</span>
<span class=c1># Create any non-existent (p)arent directories and explain (v) what was done</span>
<span class=nb>alias</span> <span class=nv>mkdir</span><span class=o>=</span><span class=s1>&#39;mkdir -pv&#39;</span>
<span class=c1># Always try to (c)ontinue getting a partially-downloaded file</span>
<span class=nb>alias</span> <span class=nv>wget</span><span class=o>=</span><span class=s1>&#39;wget -c&#39;</span>
</code></pre></div><p>Aliases come in handy when you want to avoid typing long commands, too. Here are a few I use when working with Python environments:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=nb>alias</span> <span class=nv>pym</span><span class=o>=</span><span class=s1>&#39;python3 manage.py&#39;</span>
<span class=nb>alias</span> <span class=nv>mkenv</span><span class=o>=</span><span class=s1>&#39;python3 -m venv env&#39;</span>
<span class=nb>alias</span> <span class=nv>startenv</span><span class=o>=</span><span class=s1>&#39;source env/bin/activate &amp;&amp; which python3&#39;</span>
<span class=nb>alias</span> <span class=nv>stopenv</span><span class=o>=</span><span class=s1>&#39;deactivate&#39;</span>
</code></pre></div><p>For further inspiration on ways Bash aliases can save time, I highly recommend <a href=https://www.digitalocean.com/community/tutorials/an-introduction-to-useful-bash-aliases-and-functions>the examples in this article</a>.</p><h2 id=bash-functions>Bash functions</h2><p>One downside of the aliases above is that they&rsquo;re rather static - they&rsquo;ll always expand to exactly the text declared. For a Bash alias that takes arguments, you&rsquo;ll need to create a function. You can do this like so:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=c1># Show contents of the directory after changing to it</span>
<span class=k>function</span> <span class=nb>cd</span> <span class=o>()</span> <span class=o>{</span>
    <span class=nb>builtin</span> <span class=nb>cd</span> <span class=s2>&#34;</span><span class=nv>$1</span><span class=s2>&#34;</span>
    ls -ACF
<span class=o>}</span>
</code></pre></div><p>I can&rsquo;t begin to tally how many times I&rsquo;ve typed <code>cd</code> and then <code>ls</code> immediately after to see the contents of the directory I&rsquo;m now in. With this function set up, it all happens with just those two letters! The function takes the first argument, <code>$1</code>, as the location to change directory to, then prints the contents of that directory in nicely formatted columns with file type indicators. The <code>builtin</code> part is necessary to get Bash to allow us to override this default command.</p><p>Bash functions are very useful when it comes to downloading or upgrading software, too.</p><h3 id=bash-function-for-downloading-extended-hugo>Bash function for downloading extended Hugo</h3><p>Thanks to the static site generator Hugo&rsquo;s excellent ship frequency, I previously spent at least a few minutes every couple weeks <a href=https://gohugo.io/categories/releases>downloading the new extended version</a>. With a Bash function, I only need to pass in the version number, and the upgrade happens in a few seconds.</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=c1># Hugo install or upgrade</span>
<span class=k>function</span> gethugo <span class=o>()</span> <span class=o>{</span>
    wget -q -P tmp/ https://github.com/gohugoio/hugo/releases/download/v<span class=s2>&#34;</span><span class=nv>$@</span><span class=s2>&#34;</span>/hugo_extended_<span class=s2>&#34;</span><span class=nv>$@</span><span class=s2>&#34;</span>_Linux-64bit.tar.gz
    tar xf tmp/hugo_extended_<span class=s2>&#34;</span><span class=nv>$@</span><span class=s2>&#34;</span>_Linux-64bit.tar.gz -C tmp/
    sudo mv -f tmp/hugo /usr/local/bin/
    rm -rf tmp/
    hugo version
<span class=o>}</span>
</code></pre></div><p>The <code>$@</code> notation simply takes all the arguments given, replacing its spot in the function. To run the above function and download Hugo version 0.57.2, you use the command <code>gethugo 0.57.2</code>.</p><h3 id=bash-function-for-downloading-a-specific-go-version>Bash function for downloading a specific Go version</h3><p>I&rsquo;ve got one for <a href=https://golang.org/>Golang</a>, too:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=k>function</span> getgolang <span class=o>()</span> <span class=o>{</span>
    sudo rm -rf /usr/local/go
    wget -q -P tmp/ https://dl.google.com/go/go<span class=s2>&#34;</span><span class=nv>$@</span><span class=s2>&#34;</span>.linux-amd64.tar.gz
    sudo tar -C /usr/local -xzf tmp/go<span class=s2>&#34;</span><span class=nv>$@</span><span class=s2>&#34;</span>.linux-amd64.tar.gz
    rm -rf tmp/
    go version
<span class=o>}</span>
</code></pre></div><h3 id=bash-function-for-adding-a-gitlab-remote>Bash function for adding a GitLab remote</h3><p>Or how about a function that adds a remote origin URL for GitLab to the current repository?</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=k>function</span> glab <span class=o>()</span> <span class=o>{</span>
    git remote set-url origin --add git@gitlab.com:<span class=s2>&#34;</span><span class=nv>$@</span><span class=s2>&#34;</span>/<span class=s2>&#34;</span><span class=si>${</span><span class=nv>PWD</span><span class=p>##*/</span><span class=si>}</span><span class=s2>&#34;</span>.git
    git remote -v
<span class=o>}</span>
</code></pre></div><p>With <code>glab username</code>, you can create a new <code>origin</code> URL for the current Git repository with our <code>username</code> on GitLab.com. Pushing to a new remote URL <a href=/blog/how-to-write-bash-one-liners-for-cloning-and-managing-github-and-gitlab-repositories/#a-bash-one-liner-to-create-and-push-many-repositories-on-gitlab>automatically creates a new private GitLab repository</a>, so this is a useful shortcut for creating backups!</p><p>Bash functions are really only limited by the possibilities of scripting, of which there are, practically, few limits. If there&rsquo;s anything you do on a frequent basis that requires typing a few lines into a terminal, you can probably create a Bash function for it!</p><h2 id=bash-prompt>Bash prompt</h2><p>Besides directory contents, it&rsquo;s also useful to see the full path of the directory we&rsquo;re in. The Bash prompt can show us this path, along with other useful information like our current Git branch. To make it more readable, you can define colours for each part of the prompt. Here&rsquo;s how you can set up our prompt in <code>.bashrc</code> to accomplish this:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=c1># Colour codes are cumbersome, so let&#39;s name them</span>
<span class=nv>txtcyn</span><span class=o>=</span><span class=s1>&#39;\[\e[0;96m\]&#39;</span> <span class=c1># Cyan</span>
<span class=nv>txtpur</span><span class=o>=</span><span class=s1>&#39;\[\e[0;35m\]&#39;</span> <span class=c1># Purple</span>
<span class=nv>txtwht</span><span class=o>=</span><span class=s1>&#39;\[\e[0;37m\]&#39;</span> <span class=c1># White</span>
<span class=nv>txtrst</span><span class=o>=</span><span class=s1>&#39;\[\e[0m\]&#39;</span>    <span class=c1># Text Reset</span>

<span class=c1># Which (C)olour for what part of the prompt?</span>
<span class=nv>pathC</span><span class=o>=</span><span class=s2>&#34;</span><span class=si>${</span><span class=nv>txtcyn</span><span class=si>}</span><span class=s2>&#34;</span>
<span class=nv>gitC</span><span class=o>=</span><span class=s2>&#34;</span><span class=si>${</span><span class=nv>txtpur</span><span class=si>}</span><span class=s2>&#34;</span>
<span class=nv>pointerC</span><span class=o>=</span><span class=s2>&#34;</span><span class=si>${</span><span class=nv>txtwht</span><span class=si>}</span><span class=s2>&#34;</span>
<span class=nv>normalC</span><span class=o>=</span><span class=s2>&#34;</span><span class=si>${</span><span class=nv>txtrst</span><span class=si>}</span><span class=s2>&#34;</span>

<span class=c1># Get the name of our branch and put parenthesis around it</span>
gitBranch<span class=o>()</span> <span class=o>{</span>
    git branch 2&gt; /dev/null <span class=p>|</span> sed -e <span class=s1>&#39;/^[^*]/d&#39;</span> -e <span class=s1>&#39;s/* \(.*\)/(\1)/&#39;</span>
<span class=o>}</span>

<span class=c1># Build the prompt</span>
<span class=nb>export</span> <span class=nv>PS1</span><span class=o>=</span><span class=s2>&#34;</span><span class=si>${</span><span class=nv>pathC</span><span class=si>}</span><span class=s2>\w </span><span class=si>${</span><span class=nv>gitC</span><span class=si>}</span><span class=s2>\$(gitBranch) </span><span class=si>${</span><span class=nv>pointerC</span><span class=si>}</span><span class=s2>\$</span><span class=si>${</span><span class=nv>normalC</span><span class=si>}</span><span class=s2> &#34;</span>
</code></pre></div><p>Result:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>~/github/myrepo <span class=o>(</span>master<span class=o>)</span> $
</code></pre></div><p>Naming the colours helps to easily identify where one colour starts and stops, and where the next one begins. The prompt that you see in our terminal is defined by the string following <code>export PS1</code>, with each component of the prompt set with an <a href=https://www.tldp.org/HOWTO/Bash-Prompt-HOWTO/bash-prompt-escape-sequences.html>escape sequence</a>. Let&rsquo;s break that down:</p><ul><li><code>\w</code> displays the current working directory,</li><li><code>\$(gitBranch)</code> calls the <code>gitBranch</code> function defined above, which displays the current Git branch,</li><li><code>\$</code> will display a &ldquo;$&rdquo; if you are a normal user or in normal user mode, and a &ldquo;#&rdquo; if you are root.</li></ul><p>The <a href=https://www.gnu.org/software/bash/manual/html_node/Controlling-the-Prompt.html>full list of Bash escape sequences</a> can help us display many more bits of information, including even the time and date! Bash prompts are highly customizable and individual, so feel free to set it up any way you please.</p><p>Here are a few options that put information front and centre and can help us to work more efficiently.</p><h3 id=for-the-procrastination-averse>For the procrastination-averse</h3><p>Username and current time with seconds, in 24-hour HH:MM:SS format:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=nb>export</span> <span class=nv>PS1</span><span class=o>=</span><span class=s2>&#34;</span><span class=si>${</span><span class=nv>userC</span><span class=si>}</span><span class=s2>\u </span><span class=si>${</span><span class=nv>normalC</span><span class=si>}</span><span class=s2>at \t &gt;&#34;</span>
</code></pre></div><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>user at 09:35:55 &gt;
</code></pre></div><h3 id=for-those-who-always-like-to-know-where-they-stand>For those who always like to know where they stand</h3><p>Full file path on a separate line, and username:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=nb>export</span> <span class=nv>PS1</span><span class=o>=</span><span class=s2>&#34;</span><span class=si>${</span><span class=nv>pathC</span><span class=si>}</span><span class=s2>\w</span><span class=si>${</span><span class=nv>normalC</span><span class=si>}</span><span class=s2>\n\u:&#34;</span>
</code></pre></div><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>~/github/myrepo
user:
</code></pre></div><h3 id=for-the-minimalist>For the minimalist</h3><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=nb>export</span> <span class=nv>PS1</span><span class=o>=</span><span class=s2>&#34;&gt;&#34;</span>
</code></pre></div><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>&gt;
</code></pre></div><p>We can build many practical prompts with just the basic escape sequences; once you start to integrate functions with prompts, as in the Git branch example, things can get really complicated. Whether this amount of complication is an addition or a detriment to your productivity, only you can know for sure!</p><p>Many fancy Bash prompts are possible with programs readily available with a quick search. I&rsquo;ve intentionally not provided samples here because, well, if you can tend to get as excited about this stuff as I can, it might be a couple hours before you get back to what you were doing before you started reading this post, and I just can&rsquo;t have that on my conscience. 🥺</p><p>We&rsquo;ve hopefully struck a nice balance now between time invested and usefulness gained from our Bash configuration file! I hope you use your newly-recovered keystroke capacity for good.</p></div><a class=hidden href=https://brid.gy/publish/twitter></a><a class=hidden href=https://brid.gy/publish/mastodon></a><data class=p-bridgy-omit-link value=false></data></article><div id=up-container><a href=# id=up>v</a></div><hr><div id=webmentions></div><div class=related><code class=language-sql data-lang=sql>SELECT TOP 3 * FROM Related;</code><ul role=menubar id=article-list><li role=none class=h-entry><a rel=author class="p-author h-card hidden" href=https://victoria.dev/>Victoria Drake</a>
<a role=menuitem class="article-link u-url p-name" href=https://victoria.dev/blog/how-to-write-bash-one-liners-for-cloning-and-managing-github-and-gitlab-repositories/>How to write Bash one-liners for cloning and managing GitHub and GitLab repositories</a><p class="p-summary e-content">Using xargs and awk in Bash to automate managing remote-hosted repositories.</p><p class=metadata><a class="p-category tag button" href=https://victoria.dev/tags/terminal/>terminal</a>
&nbsp;8 min read
<time class="hidden dt-published">2019-08-06 10:55:19 -0400 -0400</time></p></li><li role=none class=h-entry><a rel=author class="p-author h-card hidden" href=https://victoria.dev/>Victoria Drake</a>
<a role=menuitem class="article-link u-url p-name" href=https://victoria.dev/blog/bash-and-shell-expansions-lazy-list-making/>Bash and shell expansions: lazy list-making</a><p class="p-summary e-content">A tour of brace expansion, shell parameter expansions, and playing with substrings in Bash.</p><p class=metadata><a class="p-category tag button" href=https://victoria.dev/tags/terminal/>terminal</a>
&nbsp;5 min read
<time class="hidden dt-published">2019-11-18 07:07:24 -0500 -0500</time></p></li><li role=none class=h-entry><a rel=author class="p-author h-card hidden" href=https://victoria.dev/>Victoria Drake</a>
<a role=menuitem class="article-link u-url p-name" href=https://victoria.dev/blog/a-portable-makefile-for-continuous-delivery-with-hugo-and-github-pages/>A portable Makefile for continuous delivery with Hugo and GitHub Pages</a><p class="p-summary e-content">My Makefile for building this site, optimizing images, and running my CI/CD GitHub Actions flow.</p><p class=metadata><a class="p-category tag button" href=https://victoria.dev/tags/ci/cd/>ci/cd</a>
&nbsp;5 min read
<time class="hidden dt-published">2019-10-21 09:09:06 -0400 -0400</time></p></li></ul><div class=page-separator><p class=back-link><a href=/blog>&lt;&lt; Back to blog</a></p></div></div></div></main><footer><div class="h-card row bio" rel=author><div class=markdown id=card><figure class=profile><img class=u-photo alt="Victoria Drake" src=/img/victoria_headshot.jpg></figure><h1 class=p-name>Victoria Drake</h1></address><p class=p-note><p>Victoria Drake is a Director of Engineering in Washington, DC. She is a core maintainer and co-author for the Open Web Application Security Project (OWASP) Web Security Testing Guide. She earned the annual Top Contributor award three years in a row from the freeCodeCamp non-profit, and was recognized two years in a row as a Distinguished Author on the DEV.to developer platform. She writes and educates programmers and business leaders about cybersecurity, software development, and building happy and productive technical teams.</p><p><a href=/about>about</a> - <a href=/contact>contact</a> - <a href=https://github.com/victoriadrake>github</a> - <a href=https://twitter.com/victoriadotdev>twitter</a> - <a href=https://www.linkedin.com/in/victoriadotdev/>linkedin</a></p></p></div></div></footer><script src=/js/webmention.min.js data-wordcount=100 async></script></body></html>