<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="chrome=1"><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Victoria Drake, Director of Engineering, is building better cybersecurity and happy and productive technical teams."><title>Do I raise or return errors in Python? | victoria.dev</title><link href=https://github.com/victoriadrake rel=me><link rel=authorization_endpoint href=https://indieauth.com/auth><link rel=token_endpoint href=https://tokens.indieauth.com/token><link rel=webmention href=https://webmention.io/victoria.dev/webmention><link rel=pingback href=https://webmention.io/victoria.dev/xmlrpc><link rel=feed href=https://victoria.dev/neofeed><script async defer data-domain=victoria.dev src=https://p.victoria.dev/js/index.js></script><meta name=monetization content="$ilp.uphold.com/pBRfRwg2EJAe"><meta property="og:title" content="Do I raise or return errors in Python? - victoria.dev"><meta property="og:type" content="website"><meta property="og:description" content="Raise, return, and how to never fail silently in Python."><meta property="og:url" content="https://victoria.dev/blog/do-i-raise-or-return-errors-in-python/"><meta property="og:site_name" content="victoria.dev"><meta property="og:image" content="https://victoria.dev/img/card.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Do I raise or return errors in Python?"><meta name=twitter:image content="https://victoria.dev/img/card.png"><meta name=twitter:description content="Raise, return, and how to never fail silently in Python."><link rel="shortcut icon" href=/img/favicon.ico><link rel=stylesheet href=/css/main.min.4c13cca18828b7ff25325d6765a13a7804155171679a73a19390bb401cea9c1c.css integrity="sha256-TBPMoYgot/8lMl1nZaE6eAQVUXFnmnOhk5C7QBzqnBw=" media=screen></head><body><header role=banner><nav aria-label="Victoria.dev main menu" id=menu><ul role=menubar><li role=none class=menu-item><a role=menuitem href=/><img src=/img/bookmark.svg alt="home page icon" height=18px class=filter-icon> hi</a></li><li role=none class=menu-item><a role=menuitem href=/blog/><img src=/img/quote.svg alt="blog icon" height=18px class=filter-icon> blog</a></li><li role=none class=menu-item><a role=menuitem href=/about/><img src=/img/profile.svg alt="about page icon" height=18px class=filter-icon> about</a></li><li role=none class=menu-item><a role=menuitem href=/coffee/><img src=/img/coffee.svg alt="coffee icon" height=18px class=filter-icon> buy me coffee</a></li><li role=none class=menu-item><a role=menuitem href=/bookshelf/><img src=/img/book.svg alt="bookshelf icon" height=18px class=filter-icon> bookshelf</a></li><li role=none class=menu-item><a role=menuitem id=rss href=https://victoria.dev/index.xml rel=alternate type=application/rss+xml title="RSS for Do I raise or return errors in Python?"><img src=/img/rss.svg alt="RSS icon" height=18px class=filter-icon> rss</a></li></ul></nav></header><main aria-role=main><div class=container><article class=h-entry><h1 class=title-header>Do I raise or return errors in Python?</h1><p class=subtitle>Raise, return, and how to never fail silently in Python.</p><span><a class="tag button" href=/tags/python/>python
</a>&nbsp;
<a class="tag button" href=/tags/coding/>coding
</a>&nbsp;
<a class="tag button" href=/tags/tech-team/>tech team
</a>&nbsp;</span><p class=metadata id=date><time><a class="u-url dt-published" href=https://victoria.dev/blog/do-i-raise-or-return-errors-in-python/>February 9, 2021</a></time>
<span class=dt-updated>&nbsp;
<em>Updated: Mar 26, 2021</em></span>
<span>‚òïÔ∏è&nbsp;4 min read</span></p></p><div class=page-separator><hr></div><div class="markdown e-content"><p>I hear this question a lot: &ldquo;Do I raise or return this error in Python?&rdquo;</p><p>This is probably because the right answer will depend on your situation and the goals of your application logic. Either choice can help you ensure your Python code doesn&rsquo;t fail silently, saving you and your teammates from having to hunt down deeply entrenched errors.</p><p>Here&rsquo;s the difference between <code>raise</code> and <code>return</code> when handling failures in Python, and how to ensure your code doesn&rsquo;t fail silently.</p><h2 id=when-to-raise class=anchor-link><a href=https://victoria.dev/blog/do-i-raise-or-return-errors-in-python/#when-to-raise>When to raise</a></h2><blockquote><p>The <code>raise</code> statement allows the programmer to force a specific exception to occur. (<a href=https://docs.python.org/3/tutorial/errors.html#raising-exceptions>8.4 Raising Exceptions</a>)</p></blockquote><p>Use <code>raise</code> when you know you want a specific behavior, such as:</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=k>raise</span> <span class=ne>TypeError</span><span class=p>(</span><span class=s2>&#34;Wanted strawberry, got grape.&#34;</span><span class=p>)</span>
</code></pre></div><p>Raising an exception terminates the flow of your program, allowing the exception to bubble up the call stack. In the above example, this would let you explicitly handle <code>TypeError</code> later. If <code>TypeError</code> goes unhandled, code execution stops and you&rsquo;ll get an <em>unhandled exception</em> message.</p><p>Raise is useful in cases where you want to define a certain behavior to occur. For example, you may choose to disallow certain words in a text field:</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=k>if</span> <span class=s2>&#34;raisins&#34;</span> <span class=ow>in</span> <span class=n>text_field</span><span class=p>:</span>
    <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&#34;That word is not allowed here&#34;</span><span class=p>)</span>
</code></pre></div><p>Raise takes an instance of an exception, or a derivative of the <a href=https://docs.python.org/3/library/exceptions.html#Exception>Exception class</a>. Here are all of <a href=https://docs.python.org/3/library/exceptions.html#bltin-exceptions>Python&rsquo;s built-in exceptions</a>.</p><p>Raise can help you avoid writing functions that fail silently. For example, this code will not raise an exception if <code>JAM</code> doesn&rsquo;t exist:</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=kn>import</span> <span class=nn>os</span>


<span class=k>def</span> <span class=nf>sandwich_or_bust</span><span class=p>(</span><span class=n>bread</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
    <span class=n>jam</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>getenv</span><span class=p>(</span><span class=s2>&#34;JAM&#34;</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>bread</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>jam</span><span class=p>)</span> <span class=o>+</span> <span class=n>bread</span>


<span class=n>s</span> <span class=o>=</span> <span class=n>sandwich_or_bust</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\U0001F35E</span><span class=s2>&#34;</span><span class=p>)</span>
<span class=k>print</span><span class=p>(</span><span class=n>s</span><span class=p>)</span>
<span class=c1># Prints &#34;üçûNoneüçû&#34; which is not very tasty.</span>
</code></pre></div><p>To cause the <code>sandwich_or_bust()</code> function to actually bust, add a <code>raise</code>:</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=kn>import</span> <span class=nn>os</span>


<span class=k>def</span> <span class=nf>sandwich_or_bust</span><span class=p>(</span><span class=n>bread</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
    <span class=n>jam</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>getenv</span><span class=p>(</span><span class=s2>&#34;JAM&#34;</span><span class=p>)</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>jam</span><span class=p>:</span>
        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&#34;There is no jam. Sad bread.&#34;</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>bread</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>jam</span><span class=p>)</span> <span class=o>+</span> <span class=n>bread</span>


<span class=n>s</span> <span class=o>=</span> <span class=n>sandwich_or_bust</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\U0001F35E</span><span class=s2>&#34;</span><span class=p>)</span>
<span class=k>print</span><span class=p>(</span><span class=n>s</span><span class=p>)</span>
<span class=c1># ValueError: There is no jam. Sad bread.</span>
</code></pre></div><p>Any time your code interacts with an external variable, module, or service, there is a possibility of failure. You can use <code>raise</code> in an <code>if</code> statement to help ensure those failures aren&rsquo;t silent.</p><h3 id=raise-in-try-and-except class=anchor-link><a href=https://victoria.dev/blog/do-i-raise-or-return-errors-in-python/#raise-in-try-and-except>Raise in <code>try</code> and <code>except</code></a></h3><p>To handle a possible failure by taking an action if there is one, use a <code>try</code> &mldr; <code>except</code> statement.</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=k>try</span><span class=p>:</span>
    <span class=n>s</span> <span class=o>=</span> <span class=n>sandwich_or_bust</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\U0001F35E</span><span class=s2>&#34;</span><span class=p>)</span>
    <span class=k>print</span><span class=p>(</span><span class=n>s</span><span class=p>)</span>
<span class=k>except</span> <span class=ne>ValueError</span><span class=p>:</span>
    <span class=n>buy_more_jam</span><span class=p>()</span>
    <span class=k>raise</span>
</code></pre></div><p>This lets you <code>buy_more_jam()</code> before re-raising the exception. If you want to propagate a caught exception, use <code>raise</code> without arguments to avoid possible loss of the stack trace.</p><p>If you don&rsquo;t know that the exception will be a <code>ValueError</code>, you can also use a bare <code>except:</code> or catch any derivative of the <code>Exception</code> class with <code>except Exception:</code>. Whenever possible, it&rsquo;s better to raise and handle exceptions explicitly.</p><p>Use <code>else</code> for code to execute if the <code>try</code> does not raise an exception. For example:</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=k>try</span><span class=p>:</span>
    <span class=n>s</span> <span class=o>=</span> <span class=n>sandwich_or_bust</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\U0001F35E</span><span class=s2>&#34;</span><span class=p>)</span>
    <span class=k>print</span><span class=p>(</span><span class=n>s</span><span class=p>)</span>
<span class=k>except</span> <span class=ne>ValueError</span><span class=p>:</span>
    <span class=n>buy_more_jam</span><span class=p>()</span>
    <span class=k>raise</span>
<span class=k>else</span><span class=p>:</span>
    <span class=k>print</span><span class=p>(</span><span class=s2>&#34;Congratulations on your sandwich.&#34;</span><span class=p>)</span>
</code></pre></div><p>You could also place the print line within the <code>try</code> block, however, this is less explicit.</p><h2 id=when-to-return class=anchor-link><a href=https://victoria.dev/blog/do-i-raise-or-return-errors-in-python/#when-to-return>When to return</a></h2><p>When you use <code>return</code> in Python, you&rsquo;re giving back a value. A function returns to the location it was called from.</p><p>While it&rsquo;s more idiomatic to <code>raise</code> errors in Python, there may be occasions where you find <code>return</code> to be more applicable.</p><p>For example, if your Python code is interacting with other components that do not handle exception classes, you may want to return a message instead. Here&rsquo;s an example using a <code>try</code> &mldr; <code>except</code> statement:</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>Union</span>


<span class=k>def</span> <span class=nf>share_sandwich</span><span class=p>(</span><span class=n>sandwich</span><span class=p>:</span> <span class=nb>int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Union</span><span class=p>[</span><span class=nb>float</span><span class=p>,</span> <span class=ne>Exception</span><span class=p>]:</span>
    <span class=k>try</span><span class=p>:</span>
        <span class=n>bad_math</span> <span class=o>=</span> <span class=n>sandwich</span> <span class=o>/</span> <span class=mi>0</span>
        <span class=k>return</span> <span class=n>bad_math</span>
    <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>e</span>


<span class=n>s</span> <span class=o>=</span> <span class=n>share_sandwich</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
<span class=k>print</span><span class=p>(</span><span class=n>s</span><span class=p>)</span>
<span class=c1># Prints &#34;division by zero&#34;</span>
</code></pre></div><p>Note that when you return an <code>Exception</code> class object, you&rsquo;ll get a representation of its associated value, usually the first item in its list of arguments. In the example above, this is the string explanation of the exception. In some cases, it may be a tuple with other information about the exception.</p><p>You may also use <code>return</code> to give a specific error object, such as with <a href=https://docs.djangoproject.com/en/3.1/ref/request-response/#httpresponse-subclasses><code>HttpResponseNotFound</code> in Django</a>. For example, you may want to return a <code>404</code> instead of a <code>403</code> for security reasons:</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=k>if</span> <span class=nb>object</span><span class=o>.</span><span class=n>owner</span> <span class=o>!=</span> <span class=n>request</span><span class=o>.</span><span class=n>user</span><span class=p>:</span>
    <span class=k>return</span> <span class=n>HttpResponseNotFound</span>
</code></pre></div><p>Using <code>return</code> can help you write appropriately noisy code when your function is expected to give back a certain value, and when interacting with outside elements.</p><h2 id=make-your-errors-noisy class=anchor-link><a href=https://victoria.dev/blog/do-i-raise-or-return-errors-in-python/#make-your-errors-noisy>Make your errors noisy</a></h2><p>Silent failures create some of the most frustrating bugs to find and fix. You can help create a pleasant development experience for yourself and your team by using <code>raise</code> and <code>return</code> to handle errors in Python.</p></div><a class=hidden href=https://brid.gy/publish/twitter></a><a class=hidden href=https://brid.gy/publish/mastodon></a><data class=p-bridgy-omit-link value=false></data></article><div id=up-container><a href=# id=up>&#709;</a></div><div class=page-separator><hr></div><div id=webmentions></div><div class=related><code class=language-sql data-lang=sql>SELECT TOP 3 * FROM Related;</code><ul role=menubar id=article-list><li role=none class=h-entry><p class="p-author h-card hidden">Victoria Drake</p><img class="u-photo hidden" alt="photo of the author" id=author-img src=/img/victoria_headshot.jpg>
<a role=menuitem class="article-link u-url p-name" href=https://victoria.dev/blog/increase-developer-confidence-with-a-great-django-test-suite/>Increase developer confidence with a great Django test suite</a><p class=e-content>How to write tests for your Django applications that boost your team, and are actually useful.</p><p class=metadata><a class="tag button" href=/tags/coding/>coding</a>
‚òïÔ∏è
&nbsp;5 min read
<time class="hidden dt-published">2020-10-01 05:50:37 -0400 -0400</time></p></li><li role=none class=h-entry><p class="p-author h-card hidden">Victoria Drake</p><img class="u-photo hidden" alt="photo of the author" id=author-img src=/img/victoria_headshot.jpg>
<a role=menuitem class="article-link u-url p-name" href=https://victoria.dev/blog/django-project-best-practices-to-keep-your-developers-happy/>Django project best practices to keep your developers happy</a><p class=e-content>Using Makefiles, pre-commit, and GitHub Actions to help create a happy development team.</p><p class=metadata><a class="tag button" href=/tags/python/>python</a>
‚òïÔ∏è ‚òïÔ∏è
&nbsp;6 min read
<time class="hidden dt-published">2020-09-22 04:55:19 -0400 -0400</time></p></li><li role=none class=h-entry><p class="p-author h-card hidden">Victoria Drake</p><img class="u-photo hidden" alt="photo of the author" id=author-img src=/img/victoria_headshot.jpg>
<a role=menuitem class="article-link u-url p-name" href=https://victoria.dev/blog/manipulating-data-with-django-migrations/>Manipulating data with Django migrations</a><p class=e-content>How to update Django models and manipulate existing data using migrations.</p><p class=metadata><a class="tag button" href=/tags/coding/>coding</a>
‚òïÔ∏è
&nbsp;5 min read
<time class="hidden dt-published">2020-09-14 02:12:57 -0400 -0400</time></p></li></ul><div class=page-separator><p class=back-link><a href=/blog>&lt;&lt; Back to blog</a></p></div></div></div><footer class=container><div class="markdown bio h-card p-author"><strong><a href=https://victoria.dev/ class="u-url p-name">Victoria Drake</a></strong><figure class="profile title-avatar u-photo"><img src=/img/victoria_headshot.jpg alt="Victoria's headshot"></figure><p>Victoria Drake is a Director of Engineering in Washington, DC. She is a core maintainer and co-author for the Open Web Application Security Project (OWASP) Web Security Testing Guide. She earned the annual Top Contributor award three years in a row from the freeCodeCamp non-profit, and is a recognized Distinguished Author on the DEV.to developer platform. She writes about software development, cybersecurity, and building happy and productive technical teams.</p><p><a href=/about>about</a> - <a href=mailto:hello@victoria.dev>email</a> - <a href=https://github.com/victoriadrake>github</a> - <a href=https://twitter.com/victoriadotdev>twitter</a> - <a href=https://www.linkedin.com/in/victoriadotdev/>linkedin</a></p></div></footer></main><script src=/js/webmention.min.js data-wordcount=42 async></script><nav aria-label="Victoria.dev menu for mobile" id=menu-mobile><ul role=menubar><li role=none class=menu-item><a role=menuitem href=/><img src=/img/bookmark.svg alt="home page icon" height=18px class=filter-icon></a></li><li role=none class=menu-item><a role=menuitem href=/blog/><img src=/img/quote.svg alt="blog icon" height=18px class=filter-icon></a></li><li role=none class=menu-item><a role=menuitem href=/about/><img src=/img/profile.svg alt="about page icon" height=18px class=filter-icon></a></li><li role=none class=menu-item><a role=menuitem href=/coffee/><img src=/img/coffee.svg alt="coffee icon" height=18px class=filter-icon></a></li><li role=none class=menu-item><a role=menuitem href=/bookshelf/><img src=/img/book.svg alt="bookshelf icon" height=18px class=filter-icon></a></li></ul></nav></body></html>