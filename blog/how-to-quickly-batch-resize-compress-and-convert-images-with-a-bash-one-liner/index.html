<!DOCTYPE html>
<html lang="en-us">

    <head>
        
        <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<meta name="description" content="Victoria Drake, Director of Engineering, is building better cybersecurity and happy and productive technical teams.">
<title>
    How to quickly batch resize, compress, and convert images with a Bash one-liner | victoria.dev
</title>



        <script async defer data-domain="victoria.dev" src="https://p.victoria.dev/js/index.js"></script>

        <meta
  name="monetization"
  content="$ilp.uphold.com/pBRfRwg2EJAe">

        <meta property="og:title" content="How to quickly batch resize, compress, and convert images with a Bash one-liner - victoria.dev" />
<meta property="og:type" content="website" />
<meta property="og:description"
    content="A fast command line interface solution for batch image processing." />
<meta property="og:url" content="https://victoria.dev/blog/how-to-quickly-batch-resize-compress-and-convert-images-with-a-bash-one-liner/" />
<meta property="og:site_name" content="victoria.dev" />


<meta property="og:image" content="https://victoria.dev/blog/how-to-quickly-batch-resize-compress-and-convert-images-with-a-bash-one-liner/cover.png"/>


        <meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="How to quickly batch resize, compress, and convert images with a Bash one-liner" />


<meta name="twitter:image" content="https://victoria.dev/blog/how-to-quickly-batch-resize-compress-and-convert-images-with-a-bash-one-liner/cover.png"/>

<meta name="twitter:description"
    content="A fast command line interface solution for batch image processing." />

        
<link rel="shortcut icon" href="/img/favicon.ico">


        





<link rel="stylesheet" href="/css/main.min.2f2890fa9f484dd4df7fc5a807cce235c1c8542b4ed09ff8725fbadd9247c647.css" integrity="sha256-LyiQ&#43;p9ITdTff8WoB8ziNcHIVCtO0J/4cl&#43;63ZJHxkc=" media="screen">





        
        
        
        
    </head>

    <body>
        <header role="banner">
            
            <nav aria-label="Victoria.dev main menu" id="menu">
    <ul role="menubar">
        
        
        <li role="none" class="menu-item ">
            <a role="menuitem" href="/">
                <img src='/img/bookmark.svg' alt='home page icon' height='18px' class='filter-icon'> hi</a >
        </li>
        
        <li role="none" class="menu-item ">
            <a role="menuitem" href="/blog/">
                <img src='/img/quote.svg' alt='blog icon' height='18px' class='filter-icon'> blog</a >
        </li>
        
        <li role="none" class="menu-item ">
            <a role="menuitem" href="/about/">
                <img src='/img/profile.svg' alt='about page icon' height='18px' class='filter-icon'> about</a >
        </li>
        
        <li role="none" class="menu-item ">
            <a role="menuitem" href="/coffee/">
                <img src='/img/coffee.svg' alt='coffee icon' height='18px' class='filter-icon'> buy me coffee</a >
        </li>
        
        <li role="none" class="menu-item ">
            <a role="menuitem" href="/bookshelf/">
                <img src='/img/book.svg' alt='bookshelf icon' height='18px' class='filter-icon'> bookshelf</a >
        </li>
        
        <li role="none" class="menu-item">
            <a role="menuitem" id="rss" href="https://victoria.dev/index.xml" rel="alternate" type="application/rss+xml"
                title="RSS for How to quickly batch resize, compress, and convert images with a Bash one-liner" /><img src='/img/rss.svg' alt='RSS icon' height='18px' class='filter-icon'> rss</a>
        </li>
    </ul>
</nav>

            
        </header>
        <main aria-role="main">
            <div class="container">
                



<div id="cover-image">
    <img src="https://victoria.dev/blog/how-to-quickly-batch-resize-compress-and-convert-images-with-a-bash-one-liner/cover.png" alt="cover image" />
</div>
<article>
    <h1>
        

                How to quickly batch resize, compress, and convert images with a Bash one-liner
            </h1>
            
            <p class="subtitle">A fast command line interface solution for batch image processing.</p>
            
            <span>

                
                <a class="tag button" href="/tags/terminal/">
                    terminal
                </a>&nbsp;
                
                <a class="tag button" href="/tags/ci/cd/">
                    ci/cd
                </a>&nbsp;
                
                
            </span>
            <p class="metadata" id="date">
                <span>October 14, 2019</span>
                
                <span>
                    <em>Updated: Dec 18, 2020</em>
                </span>
                
                <span>
                     ☕️&nbsp;2 min read
                </span>
            </p>

            
            </p>

            

            <div class="page-separator">
                <hr />
            </div>

            <div class="markdown">
                <p>Part of my Hugo site continuous deployment workflow is the processing of 210 images, at time of writing.</p>
<p>Here&rsquo;s my one-liner:</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">find public/ -not -path <span class="s2">&#34;*/static/*&#34;</span> <span class="se">\(</span> -name <span class="s1">&#39;*.png&#39;</span> -o -name <span class="s1">&#39;*.jpg&#39;</span> -o -name <span class="s1">&#39;*.jpeg&#39;</span> <span class="se">\)</span> -print0 <span class="p">|</span> xargs -0 -P8 -n2 mogrify -strip -thumbnail <span class="s1">&#39;1000&gt;&#39;</span> -format jpg
</code></pre></div><p>I use <code>find</code> to target only certain image file formats in certain directories. With <a href="https://www.imagemagick.org/script/mogrify.php"><code>mogrify</code>, part of ImageMagick</a>, I resize only the images that are larger than a certain dimension, compress them, and strip the metadata. I tack on the <code>format</code> flag to create jpg copies of the images.</p>
<p>Here&rsquo;s the one-liner again (broken up for better reading):</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh"><span class="c1"># Look in the public/ directory</span>
find public/ <span class="se">\
</span><span class="se"></span><span class="c1"># Ignore directories called &#34;static&#34; regardless of location</span>
-not -path <span class="s2">&#34;*/static/*&#34;</span> <span class="se">\
</span><span class="se"></span><span class="c1"># Print the file paths of all files ending with any of these extensions</span>
<span class="se">\(</span> -name <span class="s1">&#39;*.png&#39;</span> -o -name <span class="s1">&#39;*.jpg&#39;</span> -o -name <span class="s1">&#39;*.jpeg&#39;</span> <span class="se">\)</span> -print0 <span class="se">\
</span><span class="se"></span><span class="c1"># Pipe the file paths to xargs and use 8 parallel workers to process 2 arguments</span>
<span class="p">|</span> xargs -0 -P8 -n2 <span class="se">\
</span><span class="se"></span><span class="c1"># Tell mogrify to strip metadata, and...</span>
mogrify -strip <span class="se">\
</span><span class="se"></span><span class="c1"># ...compress and resize any images larger than the target size (1000px in either dimension)</span>
-thumbnail <span class="s1">&#39;1000&gt;&#39;</span> <span class="se">\
</span><span class="se"></span><span class="c1"># Convert the files to jpg format</span>
-format jpg
</code></pre></div><p>That&rsquo;s it. That&rsquo;s the post.</p>

            </div>
        </article>

        <div id="up-container">
            <a href="#" id="up">&#709;</a>
        </div>

        <div class="page-separator">
            <hr />
        </div>

        
        
        <div class="related">
            <code class="language-sql" data-lang="sql">SELECT TOP 3 * FROM Related;</code>
            <ul role="menubar" id="article-list">
                
                

<li role="none">
    <a role="menuitem" class="article-link" href="https://victoria.dev/blog/a-lightweight-tool-agnostic-ci/cd-flow-with-github-actions/">A lightweight, tool-agnostic CI/CD flow with GitHub Actions</a>
    <p>
        How to take advantage of a simple GitHub Actions workflow without sacrificing agnostic tooling.
    </p>
    
    <p class="metadata">
        
        <a class="tag button" href="/tags/ci/cd/">ci/cd</a>
        
         ☕️
        &nbsp;5 min read
        
    </p>
    
</li>



                
                

<li role="none">
    <a role="menuitem" class="article-link" href="https://victoria.dev/blog/a-portable-makefile-for-continuous-delivery-with-hugo-and-github-pages/">A portable Makefile for continuous delivery with Hugo and GitHub Pages</a>
    <p>
        My Makefile for building this site, optimizing images, and running my CI/CD GitHub Actions flow.
    </p>
    
    <p class="metadata">
        
        <a class="tag button" href="/tags/ci/cd/">ci/cd</a>
        
         ☕️
        &nbsp;5 min read
        
    </p>
    
</li>



                
                

<li role="none">
    <a role="menuitem" class="article-link" href="https://victoria.dev/blog/look-mom-im-a-github-action-hero/">Look mom, I&#39;m a GitHub Action Hero</a>
    <p>
        The GitHub blog interviews me for their GitHub Action Hero series.
    </p>
    
    <p class="metadata">
        
        <a class="tag button" href="/tags/ci/cd/">ci/cd</a>
        
         ☕️
        &nbsp;5 min read
        
    </p>
    
</li>



                
            </ul>
            

            <div class="page-separator">
                <p class="back-link"><a href="/blog">
                        &lt;&lt; Back to blog</a>
                </p>
            </div>
        </div>
        
            </div>

            <footer class="container">
                
        




<div class="markdown bio">
    
    <figure class="profile">
    <img src="/img/victoria_headshot.jpg"
         alt="Victoria&#39;s headshot"/> 
</figure>

<p>Victoria Drake is a Director of Engineering in Washington, DC. She is a core maintainer and co-author for the Open Web Application Security Project (OWASP) Web Security Testing Guide. She earned the annual Top Contributor award two years in a row from the freeCodeCamp non-profit, and is a recognized Distinguished Author on the DEV.to developer platform. She writes about software development, cybersecurity, and building happy and productive technical teams.</p>
<p><a href="/about">about</a> - <a href="mailto:hello@victoria.dev">email</a> - <a href="https://github.com/victoriadrake">github</a> - <a href="https://twitter.com/victoriadotdev">twitter</a> - <a href="https://www.linkedin.com/in/victoriadotdev/">linkedin</a></p>

</div>


        
            </footer>
        </main>

        
        
        
        <nav aria-label="Victoria.dev menu for mobile" id="menu-mobile">
            <ul role="menubar">
            
            
            <li role="none" class="menu-item">
                <a role="menuitem" href="/">
                    <img src='/img/bookmark.svg' alt='home page icon' height='18px' class='filter-icon'></a >
            </li>
            
            <li role="none" class="menu-item">
                <a role="menuitem" href="/blog/">
                    <img src='/img/quote.svg' alt='blog icon' height='18px' class='filter-icon'></a >
            </li>
            
            <li role="none" class="menu-item">
                <a role="menuitem" href="/about/">
                    <img src='/img/profile.svg' alt='about page icon' height='18px' class='filter-icon'></a >
            </li>
            
            <li role="none" class="menu-item">
                <a role="menuitem" href="/coffee/">
                    <img src='/img/coffee.svg' alt='coffee icon' height='18px' class='filter-icon'></a >
            </li>
            
            <li role="none" class="menu-item">
                <a role="menuitem" href="/bookshelf/">
                    <img src='/img/book.svg' alt='bookshelf icon' height='18px' class='filter-icon'></a >
            </li>
            
        </ul>
        </nav>
    </body>

</html>
